- if @logs.blank? && @context != 'calendar'
  = content_tag(:div, t('common.no_records'), class: 'no-records-msg')
- else
  .show-actions.hidden-print class=(@context == 'calendar' ? 'nested-expander' : '')
    / - if @context == 'calendar'
    a data-expands="step-logs-#{@step.id}" = t('log.show_logs_n', n: @step.logs_count)
    a data-hides="step-logs-#{@step.id}" = t('log.hide_logs_n', n: @step.logs_count)
    - unless @context == 'dashboard'
      a data-expand-all=".logs-index" href="#" = t('common.expand_all')
      a data-hide-all=".logs-index" href="#"
        = @context == 'calendar' ? t('common.condense_all') : t('common.hide_all')

  - unless @context == 'calendar'
    - if @step
      h5
        - if @step.milestone?
          i.fa.fa-fw.fa-flag-o
        - elsif @step.checkin?
          i.fa.fa-fw.fa-calendar
        = @step.summary

  .logs-index.post-list data-expandable="step-logs-#{@step.id}"
    - @logs.each do |log|
      - step = log.project_step
      .log.post data-id=log.id
        header.small
          .post-info
            .item
              i.fa.fa-calendar-o>
              = ldate(log.date)
            .item
              a href=admin_person_path(log.agent)
                i.fa.fa-user>
                = log.agent_name
            .item
              i.fa.fa-commenting-o>
              = log.progress_metric || t('project_step.no_status')

            - unless @context == 'calendar'
              - unless params[:org].present? || params[:project].present? || params[:step].present? || !step.project.organization
                .item
                  a href=admin_organization_path(step.project.organization)
                    i.fa.fa-building-o>
                    = step.project.organization.name
              - unless params[:step].present?
                .item
                  a href=(admin_project_path(step.project) + "/timeline#step-#{step.id}")
                    = project_step_icon(step)
                    = step.summary.present? ? step.summary : t('log.untitled_step')

            / don't show edit and delete in project step rendition of log list
            - unless @context == 'calendar' || @context == 'dashboard' || controller_name == 'project_steps'
              .item
                a data-action="edit"
                  i.fa.fa-pencil>
                  = t(:edit)
              .item
                = link_to '#',
                    data: { \
                      action: 'delete', \
                      confirm: t('project_logs.shared.confirm_deletion') \
                    }
                      i.fa.fa-trash>
                      = t(:delete)

        - if log.summary
          span.summary = log.summary

        - if log.has_more? && @context != 'dashboard'
          a data-expands="more-#{log.id}" = t(:more)
          a data-hides="more-#{log.id}" = t(:less)

          div data-expandable="more-#{log.id}"
            - if log.details.present?
              .extra
                = simple_format log.details.to_s

            - if log.additional_notes.present?
              .extra
                = simple_format content_tag(:strong, t('log.additional_notes')) << log.additional_notes.to_s

            - if log.private_notes.present?
              .extra
                = simple_format content_tag(:strong, t('log.private_notes')) << log.private_notes.to_s

            - if log.media.present?
              .extra.media-container.row
                = render 'admin/media/index', media: log.media, owner: log
